# Build script for zlib.
# SPDX-License-Identifier: Apache-2.0
# SPDX-FileCopyrightText: 2025, John Unland

version=1.3.1

cd -- "$TMPDIR"

rm -rf zlib-$version

unpack "${worktree}/sources/zlib-$version.tar.xz"

cd zlib-$version

./configure --prefix=/usr

make -j${jobs}

make check -j${jobs}

make -j${jobs} install

rm -fv /usr/lib/libz.a

cleanup() {
    cd -- "$TMPDIR" && rm -rf zlib-$version
}